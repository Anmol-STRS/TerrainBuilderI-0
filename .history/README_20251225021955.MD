# Terrain Builder

High-performance C++ terrain preprocessing pipeline for large-scale DEM processing.

## Overview

Terrain Builder processes and merges Digital Elevation Model (DEM) files into unified terrain grids **5× faster** than traditional methods. Built for GIS analysts and hydraulic modelers working with HEC-RAS and similar tools.

### Key Features

- **5× Performance**: Process 60GB of terrain data in 3 hours vs. 15 hours baseline
- **Smart Caching**: LRU block cache with 40-60% hit rate
- **Memory Efficient**: Constant 622MB footprint regardless of dataset size
- **SIMD Optimized**: AVX2 acceleration for 2.5× processing speedup
- **Scalable**: Handles 360+ files with automatic spatial indexing

## Quick Stats

```
60,000+ lines of production C++ code
11 core modules
9,604 chunks processed per run
256 MB intelligent cache
5× faster than HEC-RAS baseline
```

## Performance

| Metric | HEC-RAS Baseline | Terrain Builder | Improvement |
|--------|------------------|-----------------|-------------|
| Processing Time | 15 hours | 3 hours | **5× faster** |
| Throughput | 1.1 MB/s | 6.3 MB/s | **5.7× faster** |
| Memory Usage | Variable | 622 MB | **Constant** |

### Test Dataset
- 360 DEM files
- 60 GB total size
- Mixed formats (GeoTIFF, IMG)
- Multiple coordinate systems

## Architecture

### Four-Phase Pipeline

```
Phase 1: Discovery & Metadata
├─ Parallel file scanning (360 files in 0.6s)
└─ Spatial indexing with R-tree

Phase 2: Planning
├─ Target grid generation
└─ Chunk-based tiling (9,604 chunks)

Phase 3: Processing
├─ Windowed reading with LRU cache
├─ SIMD-optimized resampling
└─ NoData-aware mosaicking

Phase 4: Output
└─ Compressed, tiled GeoTIFF
```

### Core Modules

- **metadata_extractor**: Parallel DEM file scanning
- **terrain_input_catalog**: Spatial indexing and queries
- **target_grid**: Output grid planning
- **chunk_planner**: Tiling strategy
- **windowed_raster_reader**: Cached I/O
- **cpu_kernels**: SIMD-optimized processing
- **geotiff_writer**: Compressed output
- **terrain_pipeline**: Pipeline orchestration
- **custom_raster_io**: Memory-mapped I/O

## Technology Stack

- **Language**: Modern C++ (C++11/14/17)
- **Geospatial**: GDAL 3.x, PROJ 8.x
- **Optimization**: AVX2 SIMD, memory-mapped I/O
- **Build**: CMake 3.15+

## Supported Formats

### Input
- GeoTIFF (.tif, .tiff) - custom fast reader
- ERDAS IMG (.img)
- ENVI (.hdr)
- ASCII Grid (.asc)
- SRTM HGT (.hgt)
- NetCDF (.nc)
- HDF4/HDF5 (.hdf)
- 100+ formats via GDAL

### Output
- GeoTIFF (tiled, LZW compressed)

## Use Cases

- **Hydraulic Modeling**: Terrain preprocessing for HEC-RAS
- **GIS Analysis**: Creating unified terrain grids
- **Large-Scale Processing**: Batch processing hundreds of DEM files
- **Research**: Fast terrain analysis workflows

## Documentation

Comprehensive documentation available in the [`docs/`](docs/) directory:

- **[Documentation Home](docs/readme.md)** - Overview and quick start
- **[Architecture](docs/Architecture.md)** - System design and components
- **[Architecture Diagrams](docs/overview_diagrams.md)** - Visual documentation (15 diagrams)
- **[Performance Guide](docs/PERFORMANCE.md)** - Benchmarks and optimization
- **[Technical Specs](docs/TECHNICAL_SPECS.md)** - Detailed specifications

## Roadmap

### Phase 3: Advanced I/O (In Progress)
- Custom memory-mapped readers for all formats
- Enhanced SIMD kernels for resampling
- **Target**: 12.5× speedup (1.2 hours for 60GB)

### Phase 4: GPU Acceleration (Planned)
- CUDA kernels for resampling and mosaicking
- Asynchronous CPU-GPU pipeline
- Multi-chunk parallel processing
- **Target**: 27× speedup (33 minutes for 60GB)

## Real-World Impact

### Case Study: Hydraulic Modeling Project

**Before (HEC-RAS)**:
- Processing time: 15 hours per run
- Multiple iterations: Days of waiting
- Limited exploration of scenarios

**After (Terrain Builder)**:
- Processing time: 3 hours per run
- Time saved: 12 hours per iteration
- 60+ hours saved across project
- Faster iteration, better results

## Requirements

### Minimum
- Modern x86-64 CPU
- 2 GB RAM
- GDAL 3.0+
- C++14 compiler

### Recommended
- CPU with AVX2 support
- 4 GB RAM
- SSD storage
- Linux (best performance)

### Optimal
- 8+ core CPU with AVX2/AVX-512
- 8 GB RAM
- NVMe SSD
- Linux kernel 5.0+

## License

See [LICENSE](LICENSE) file for details.

## About This Repository

This is a **documentation-only repository** showcasing the architecture, design, and performance of Terrain Builder. The full source code is proprietary and not included in this public release.

### What's Included
- Complete architecture documentation
- Performance benchmarks and analysis
- Technical specifications
- 15 comprehensive architecture diagrams
- Design patterns and algorithms

### What's Not Included
- Source code (.cpp, .hpp files)
- Build scripts and configuration
- Test suites
- Example datasets
 Contact

##
For inquiries about Terrain Builder:
- Open an issue in this repository
- Professional inquiries: See profile for contact information

---

**Built for performance. Designed for scale.**

Terrain Builder - High-performance terrain preprocessing for the modern GIS workflow.
